<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">Available Methods | React Native IAP</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://react-native-iap.dooboolab.com/docs/api_reference/methods"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Available Methods | React Native IAP"><meta data-react-helmet="true" name="description" content="| Method | Result | Description |"><meta data-react-helmet="true" property="og:description" content="| Method | Result | Description |"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://react-native-iap.dooboolab.com/docs/api_reference/methods"><link data-react-helmet="true" rel="alternate" href="https://react-native-iap.dooboolab.com/docs/api_reference/methods" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://react-native-iap.dooboolab.com/docs/api_reference/methods" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.4ffd3df1.css">
<link rel="preload" href="/assets/js/runtime~main.4f9d1ea9.js" as="script">
<link rel="preload" href="/assets/js/main.64f4e047.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="react ntaive iap" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo.png" alt="react ntaive iap" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">React Native IAP</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/dooboolab/react-native-iap" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">React Native IAP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/installing">Installing</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docs/usage_instructions/connection_lifecycle">Usage instructions</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_2fq0" href="/docs/api_reference/available_purchase">API Reference</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api_reference/available_purchase">AvailablePurchase</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/api_reference/methods">Available Methods</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api_reference/product">Product</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/manual_install">Manual installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/amazon">Amazon IAP Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/faq">Frequently Asked Questions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/support_us">Supporting react-native-iap</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/troubleshooting">Troubleshooting</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="theme-doc-markdown markdown"><header><h1>Available Methods</h1></header><table><thead><tr><th>Method</th><th>Result</th><th>Description</th></tr></thead><tbody><tr><td><code>initConnection()</code></td><td><code>Promise&lt;boolean&gt;</code></td><td>Init IAP module. On Android this can be called to preload the connection to Play Services. True means the Native SDK was initialized successfully. On iOS, it will simply call <code>canMakePayments</code> method and return value which is required for the listeners to work properly.</td></tr><tr><td><code>purchaseUpdatedListener((purchase: ProductPurchase) =&gt; {})</code></td><td><code>EmitterSubscription</code></td><td>Register a callback that gets called when the store has any updates to purchases that have not yet been finished, consumed or acknowledged. Returns a React Native <code>EmitterSubscription</code> on which you can call <code>.remove()</code> to stop receiving updates. Register you listener as soon as possible and react to updates at all times.</td></tr><tr><td><code>purchaseErrorListener((error: PurchaseError) =&gt; {})</code></td><td><code>EmitterSubscription</code></td><td>Register a callback that gets called when there has been an error with a purchase. Returns a React Native <code>EmitterSubscription</code> on which you can call <code>.remove()</code> to stop receiving updates.</td></tr><tr><td><code>getProducts(skus: string[])</code><ul><li>skus: array of Product ID/sku</li></ul></td><td><code>Promise&lt;Product[]&gt;</code></td><td>Get a list of products (consumable and non-consumable items, but not subscriptions). Note: With before <code>iOS 11.2</code>, this method <em>will</em> also return subscriptions if they are included in your list of SKUs. This is because we cannot differentiate between IAP products and subscriptions prior to <code>iOS 11.2</code>.</td></tr><tr><td><code>getSubscriptions(skus: string[])</code><ul><li>skus: array of Subscription ID/sku</li></ul></td><td><code>Promise&lt;Subscription[]&gt;</code></td><td>Get a list of subscriptions. Note: With before <code>iOS 11.2</code>, this method <em>will</em> also return products if they are included in your list of SKUs. This is because we cannot differentiate between IAP products and subscriptions prior to <code>iOS 11.2</code>.</td></tr><tr><td><code>getPurchaseHistory()</code></td><td><code>Promise&lt;Purchase[]&gt;</code></td><td>Gets an inventory of purchases made by the user regardless of consumption status (where possible).</td></tr><tr><td><code>getAvailablePurchases()</code></td><td><code>Promise&lt;Purchase[]&gt;</code></td><td>Get all purchases made by the user (either non-consumable, or haven&#x27;t been consumed yet). On Android, it can be called at app launch, but on iOS, only at restoring purchase is recommended (See: <a href="https://github.com/dooboolab/react-native-iap/issues/747" target="_blank" rel="noopener noreferrer">#747</a>).</td></tr><tr><td><code>requestPurchase(sku: string, andDangerouslyFinishTransactionAutomatically: boolean, obfuscatedAccountIdAndroid: string, obfuscatedProfileIdAndroid: string)</code><ul></ul></td><td><code>Promise&lt;ProductPurchase&gt;</code></td><td>Request a purchase. <code>purchaseUpdatedListener</code> will receive the result.<br> <code>andDangerouslyFinishTransactionAutomatically</code> defaults to <code>true</code> for backwards compatibility but this is deprecated and you should set it to false once you&#x27;re <a href="/docs/usage_instructions/purchase">manually finishing your transactions</a>.</td></tr><tr><td><code>requestPurchaseWithQuantityIOS(sku: string, quantity: number)</code><ul><li>sku: product ID/sku</li><li>quantity: Quantity</li></ul></td><td><code>void</code></td><td><strong>iOS only</strong> Buy a product with a specified quantity. <code>purchaseUpdatedListener</code> will receive the result</td></tr><tr><td><em>*deprecated</em> <del><code>buySubscription(sku: string)</code></del><ul><li>sku: subscription ID/sku</li></ul></td><td><code>void</code></td><td>Create (buy) a subscription to a sku.</td></tr><tr><td><code>requestSubscription(sku: string, andDangerouslyFinishTransactionAutomaticallyIOS: boolean, /**oldSkuAndroid: string **WARNING** this parameter has been removed*/, purchaseTokenAndroid: string, prorationModeAndroid: ProrationModesAndroid, obfuscatedAccountIdAndroid: string, obfuscatedProfileIdAndroid: string)</code><ul><li>sku: subscription ID/sku</li><li>prorationModeAndroid: one of undefined, UNKNOWN_SUBSCRIPTION_UPGRADE_DOWNGRADE_POLICY, IMMEDIATE_WITH_TIME_PRORATION, IMMEDIATE_AND_CHARGE_PRORATED_PRICE, IMMEDIATE_WITHOUT_PRORATION, DEFERRED</li></ul></td><td><code>Promise&lt;SubscriptionPurchase <!-- -->|<!-- --> null&gt;</code></td><td>Create (buy) a subscription to a sku. <strong>Note:</strong> Promise resolves to null when using proratioModesAndroid=DEFERRED, and to a SubscriptionPurchase otherwise</td></tr><tr><td><code>clearTransactionIOS()</code></td><td><code>void</code></td><td><strong>iOS only</strong> Clear up unfinished transanctions which sometimes cause problems. Read more in <a href="https://github.com/dooboolab/react-native-iap/issues/257" target="_blank" rel="noopener noreferrer">#257</a>, <a href="https://github.com/dooboolab/react-native-iap/issues/801" target="_blank" rel="noopener noreferrer">#801</a>.</td></tr><tr><td><code>clearProductsIOS()</code></td><td><code>void</code></td><td><strong>iOS only</strong> Clear all products and subscriptions. Read more in below README.</td></tr><tr><td><code>getReceiptIOS()</code></td><td><code>Promise&lt;string&gt;</code></td><td><strong>iOS only</strong> Get the current receipt.</td></tr><tr><td><code>getPendingPurchasesIOS()</code></td><td><code>Promise&lt;ProductPurchase[]&gt;</code></td><td><strong>IOS only</strong> Gets all the transactions which are pending to be finished.</td></tr><tr><td><code>validateReceiptIos(body: Record&lt;string, unknown&gt;, devMode: boolean)</code><ul><li>body: receiptBody</li><li>devMode: isTest</li></ul></td><td><code>Object <!-- -->|<!-- --> boolean</code></td><td><strong>iOS only</strong> Validate receipt.</td></tr><tr><td><code>presentCodeRedemptionSheetIOS()</code></td><td><code>Promise&lt;null&gt;</code></td><td><strong>iOS only</strong> Availability: <code>iOS 14.0+</code> Displays a sheet that enables users to redeem subscription offer codes that you generated in App Store Connect.</td></tr><tr><td><code>endConnection()</code></td><td><code>Promise&lt;void&gt;</code></td><td>End billing connection.</td></tr><tr><td><code>flushFailedPurchasesCachedAsPendingAndroid()</code></td><td><code>Promise&lt;void&gt;</code></td><td><strong>Android only</strong> Consume all &#x27;ghost&#x27; purchases (that is, pending payment that already failed but is still marked as pending in Play Store cache)</td></tr><tr><td><code>finishTransaction(purchase: InAppPurchase/ProductPurchase, isConsumable?: boolean, developerPayloadAndroid?: string)</code><ul><li>purchase: purchase object</li><li>isConsumable?: specify whether the product is a consumable</li><li>developerPayloadAndroid: developerPayload</li></ul></td><td><code>Promise&lt;void&gt;</code></td><td>This method works for both platforms. Equal to  finishTransaction for iOS,  consume purchase for Android consumables and acknowledge purchase for Android non-consumables.</td></tr><tr><td><em>*deprecated</em> <del><code>buySubscription(sku: string, prevSku?: string, mode?: number)</code></del><ul><li>sku: subscription ID/sku</li><li>prevSku: old subscription ID/sku (optional)</li><li>mode: proration mode (optional)</li></ul></td><td><code>Promise&lt;Purchase&gt;</code></td><td><strong>Android only</strong> Create (buy) a subscription to a sku. For upgrading/downgrading subscription on Android pass the second parameter with current subscription ID, on iOS this is handled automatically by store. You can also optionally pass in a proration mode integer for upgrading/downgrading subscriptions on Android</td></tr><tr><td><code>validateReceiptAndroid(bundleId: string, productId: string, productToken: string, accessToken: string)</code> <ul><li>bundleId: the packageName</li><li>productId: productId</li><li>productToken: productToken</li><li>accessToken: accessToken</li><li>isSubscription: isSubscription</li></ul></td><td><code>Object <!-- -->|<!-- --> boolean</code></td><td><strong>Android only</strong> Validate receipt.</td></tr><tr><td><code>deepLinkToSubscriptionsAndroid(sku: string)</code> <ul><li>sku: subscription sku</li></ul></td><td><code>void</code></td><td><strong>Android only</strong> Deep link user into Google Play&#x27;s subscriptions screen.</td></tr><tr><td><code>validateReceiptAmazon(developerSecret: string, userId: string, receiptId: string, useSandbox : boolean)</code> <ul><li>developerSecret: from the Amazon developer console</li><li>userId: who purchased the item</li><li>receiptId: long obfuscated string returned when purchasing the item</li><li>useSandbox: Defaults to true, use sandbox environment or production.</li></ul></td><td><code>Object <!-- -->|<!-- --> boolean</code></td><td><strong>Amazon only</strong> Validate receipt.</td></tr><tr><td><code>getPromotedProductIOS()</code></td><td><code>Promise&lt;Product <!-- -->|<!-- --> null&gt;</code></td><td><strong>IOS only</strong> Returns the productId of the promoted product. Indicates the the App Store purchase should continue from the app instead of the App Store.</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/dooboolab/react-native-iap/edit/main/docs/docs/api_reference/methods.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/api_reference/available_purchase"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">AvailablePurchase</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/api_reference/product"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Product</div></a></div></nav></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">GitHub</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/dooboolab/react-native-iap/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Issues</a></li><li class="footer__item"><a href="https://github.com/dooboolab/react-native-iap/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discussions</a></li><li class="footer__item"><a href="https://github.com/dooboolab/react-native-iap/pulls" target="_blank" rel="noopener noreferrer" class="footer__link-item">Pull requests</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">This is an Open Source project using the MIT license built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.4f9d1ea9.js"></script>
<script src="/assets/js/main.64f4e047.js"></script>
</body>
</html>