"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2560],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>m});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=s(a),m=r,h=d["".concat(p,".").concat(m)]||d[m]||c[m]||o;return a?n.createElement(h,i(i({ref:t},u),{},{components:a})):n.createElement(h,i({ref:t},u))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=d;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var s=2;s<o;s++)i[s]=a[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},5162:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(7294),r=a(6010);const o="tabItem_Ymn6";function i(e){let{children:t,hidden:a,className:i}=e;return n.createElement("div",{role:"tabpanel",className:(0,r.Z)(o,i),hidden:a},t)}},5488:(e,t,a)=>{a.d(t,{Z:()=>m});var n=a(7462),r=a(7294),o=a(6010),i=a(2389),l=a(7392),p=a(7094),s=a(2466);const u="tabList__CuJ",c="tabItem_LNqP";function d(e){var t,a;const{lazy:i,block:d,defaultValue:m,values:h,groupId:f,className:v}=e,b=r.Children.map(e.children,(e=>{if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),g=null!=h?h:b.map((e=>{let{props:{value:t,label:a,attributes:n}}=e;return{value:t,label:a,attributes:n}})),k=(0,l.l)(g,((e,t)=>e.value===t.value));if(k.length>0)throw new Error('Docusaurus error: Duplicate values "'+k.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.');const y=null===m?m:null!=(t=null!=m?m:null==(a=b.find((e=>e.props.default)))?void 0:a.props.value)?t:b[0].props.value;if(null!==y&&!g.some((e=>e.value===y)))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+y+'" but none of its children has the corresponding value. Available values are: '+g.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");const{tabGroupChoices:w,setTabGroupChoices:N}=(0,p.U)(),[A,z]=(0,r.useState)(y),T=[],{blockElementScrollPositionUntilNextRender:I}=(0,s.o5)();if(null!=f){const e=w[f];null!=e&&e!==A&&g.some((t=>t.value===e))&&z(e)}const O=e=>{const t=e.currentTarget,a=T.indexOf(t),n=g[a].value;n!==A&&(I(t),z(n),null!=f&&N(f,String(n)))},P=e=>{var t;let a=null;switch(e.key){case"ArrowRight":{var n;const t=T.indexOf(e.currentTarget)+1;a=null!=(n=T[t])?n:T[0];break}case"ArrowLeft":{var r;const t=T.indexOf(e.currentTarget)-1;a=null!=(r=T[t])?r:T[T.length-1];break}}null==(t=a)||t.focus()};return r.createElement("div",{className:(0,o.Z)("tabs-container",u)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":d},v)},g.map((e=>{let{value:t,label:a,attributes:i}=e;return r.createElement("li",(0,n.Z)({role:"tab",tabIndex:A===t?0:-1,"aria-selected":A===t,key:t,ref:e=>T.push(e),onKeyDown:P,onFocus:O,onClick:O},i,{className:(0,o.Z)("tabs__item",c,null==i?void 0:i.className,{"tabs__item--active":A===t})}),null!=a?a:t)}))),i?(0,r.cloneElement)(b.filter((e=>e.props.value===A))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},b.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==A})))))}function m(e){const t=(0,i.Z)();return r.createElement(d,(0,n.Z)({key:String(t)},e))}},4296:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>u,contentTitle:()=>p,default:()=>m,frontMatter:()=>l,metadata:()=>s,toc:()=>c});var n=a(7462),r=(a(7294),a(3905)),o=a(5488),i=a(5162);const l={sidebar_position:7},p="Amazon IAP",s={unversionedId:"guides/amazon-iap",id:"guides/amazon-iap",title:"Amazon IAP",description:"The guide assumes that react-native-iap is implemented in your app and works with the Play Store without issues. Here are the additional steps to configure Amazon IAP.",source:"@site/docs/guides/amazon-iap.md",sourceDirName:"guides",slug:"/guides/amazon-iap",permalink:"/docs/guides/amazon-iap",draft:!1,editUrl:"https://github.com/dooboolab/react-native-iap/edit/main/docs/docs/guides/amazon-iap.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"Receipts",permalink:"/docs/guides/receipts"},next:{title:"Troubleshooting",permalink:"/docs/guides/troubleshooting"}},u={},c=[{value:"Add In-App Items for your app",id:"add-in-app-items-for-your-app",level:3},{value:"App configuration",id:"app-configuration",level:3},{value:"Testing in development",id:"testing-in-development",level:2},{value:"Server Validation",id:"server-validation",level:2},{value:"Subscriptions",id:"subscriptions",level:2},{value:"Caveats",id:"caveats",level:2}],d={toc:c};function m(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"amazon-iap"},"Amazon IAP"),(0,r.kt)("p",null,"The guide assumes that ",(0,r.kt)("inlineCode",{parentName:"p"},"react-native-iap")," is implemented in your app and works with the Play Store without issues. Here are the additional steps to configure Amazon IAP."),(0,r.kt)("h3",{id:"add-in-app-items-for-your-app"},"Add In-App Items for your app"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'Create "In-App Items" using Amazon Developer portal for your app. Amazon put up detailed instructions at ',(0,r.kt)("a",{parentName:"p",href:"https://developer.amazon.com/docs/in-app-purchasing/iap-create-and-submit-iap-items.html"},"https://developer.amazon.com/docs/in-app-purchasing/iap-create-and-submit-iap-items.html"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Add new ",(0,r.kt)("inlineCode",{parentName:"p"},"SKU")," strings to your ",(0,r.kt)("inlineCode",{parentName:"p"},"Iap.getProducts")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"Iap.getSubscriptions")," calls."))),(0,r.kt)("h3",{id:"app-configuration"},"App configuration"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"The current version of Amazon IAP SDK does not play well with R8 optimization. (",(0,r.kt)("a",{parentName:"li",href:"https://developer.amazon.com/docs/in-app-purchasing/iap-obfuscate-the-code.html"},"https://developer.amazon.com/docs/in-app-purchasing/iap-obfuscate-the-code.html"),").")),(0,r.kt)("p",null,"Add the code below in ",(0,r.kt)("inlineCode",{parentName:"p"},"android/app/proguard-rules.pro"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-diff"},"+ -dontwarn com.amazon.**\n+ -keep class com.amazon.** {*;}\n+ -keepattributes *Annotation*\n")),(0,r.kt)("h2",{id:"testing-in-development"},"Testing in development"),(0,r.kt)("p",null,"To run the example app, with the amazon provider, run:"),(0,r.kt)(o.Z,{groupId:"npm2yarn",mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"npm",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm run android:amazon\n"))),(0,r.kt)(i.Z,{value:"yarn",label:"Yarn",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yarn run android:amazon\n")))),(0,r.kt)("p",null,"Amazon offers the ",(0,r.kt)("inlineCode",{parentName:"p"},"App Tester")," tool to make In-App purchases testing easier. More information can be found ",(0,r.kt)("a",{parentName:"p",href:"https://developer.amazon.com/docs/in-app-purchasing/iap-app-tester-user-guide.html"},"here"),"."),(0,r.kt)("h2",{id:"server-validation"},"Server Validation"),(0,r.kt)("p",null,"Amazon IAP API supports validation of In-App purchases on a remote server side. More information can be found ",(0,r.kt)("a",{parentName:"p",href:"https://developer.amazon.com/docs/in-app-purchasing/iap-rvs-for-android-apps.html"},"here"),"."),(0,r.kt)("h2",{id:"subscriptions"},"Subscriptions"),(0,r.kt)("p",null,"When fetching subscriptions from Amazon, make sure to use children ",(0,r.kt)("inlineCode",{parentName:"p"},"SKUs")," (so SKUs for specific period ex. monthly or annually), do not use parent subscription ",(0,r.kt)("inlineCode",{parentName:"p"},"SKUs"),"!"),(0,r.kt)("h2",{id:"caveats"},"Caveats"),(0,r.kt)("p",null,"Amazon does not return decimal price & currency. Only localized price as a string (ex. 11.22$), see this ",(0,r.kt)("a",{parentName:"p",href:"https://forums.developer.amazon.com/answers/234257/view.html"},"page"),"."),(0,r.kt)("p",null,"The package will try its best to parse the string into decimal price. If the package cannot parse the price, it will be 0. Currency is detected based on users Amazon marketplace."))}m.isMDXComponent=!0}}]);